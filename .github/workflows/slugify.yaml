name: Generate Branch Slug
on:
  workflow_dispatch: {}
jobs:
  generate-slug:
    runs-on: ubuntu-latest
    outputs:
      slug: ${{ steps.slugify.outputs.slug }}
    steps:
    - name: Setup Go
      uses: actions/setup-go@v5
      with:
        go-version: '1.21'
    - name: Generate slug
      id: slugify
      run: "# Create working directory\nmkdir -p $HOME/slugify\ncd $HOME/slugify\n\
        \n# Create Go script\ncat > main.go << 'EOF'\npackage main\n\nimport (\n \
        \   \"fmt\"\n    \"os\"\n    \"github.com/gosimple/slug\"\n)\n\nfunc main()\
        \ {\n    if len(os.Args) < 2 {\n        fmt.Println(\"Usage: slugify <text>\"\
        )\n        os.Exit(1)\n    }\n\n    text := os.Args[1]\n    slugged := slug.Make(text)\n\
        \    fmt.Println(slugged)\n}\nEOF\n\n# Initialize module and install dependency\n\
        go mod init slugify\ngo mod tidy\ngo get github.com/gosimple/slug\n\n# Build\n\
        go build -o slugify main.go\n\n# Generate slug\nVALUE=\"${{ inputs.value }}\"\
        \necho \"Input value: $VALUE\"\n\nSLUG=$(./slugify \"$VALUE\")\necho \"Generated\
        \ slug: $SLUG\"\n\n# Export\necho \"slug=$SLUG\" >> $GITHUB_OUTPUT\n"
